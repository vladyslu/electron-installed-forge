"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = void 0;
var _pluginBase = require("@electron-forge/plugin-base");
var _chalk = _interopRequireDefault(require("chalk"));
var _debug = _interopRequireDefault(require("debug"));
var _requireSearch = _interopRequireDefault(require("./require-search"));
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const d = (0, _debug).default('electron-forge:plugins');
function isForgePlugin(plugin) {
    return plugin.__isElectronForgePlugin;
}
class PluginInterface {
    constructor(dir, forgeConfig){
        this.plugins = forgeConfig.plugins.map((plugin)=>{
            if (isForgePlugin(plugin)) {
                return plugin;
            }
            if (typeof plugin === 'object' && 'name' in plugin && 'config' in plugin) {
                const { name: pluginName , config: opts  } = plugin;
                if (typeof pluginName !== 'string') {
                    throw new Error(`Expected plugin[0] to be a string but found ${pluginName}`);
                }
                // eslint-disable-next-line @typescript-eslint/no-explicit-any
                const Plugin = (0, _requireSearch).default(dir, [
                    pluginName
                ]);
                if (!Plugin) {
                    throw new Error(`Could not find module with name: ${pluginName}. Make sure it's listed in the devDependencies of your package.json`);
                }
                return new Plugin(opts);
            }
            throw new Error(`Expected plugin to either be a plugin instance or a { name, config } object but found ${plugin}`);
        });
        // TODO: fix hack
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        this.config = null;
        Object.defineProperty(this, 'config', {
            value: forgeConfig,
            enumerable: false,
            configurable: false,
            writable: false
        });
        for (const plugin1 of this.plugins){
            plugin1.init(dir, forgeConfig);
        }
        this.triggerHook = this.triggerHook.bind(this);
        this.overrideStartLogic = this.overrideStartLogic.bind(this);
    }
    async triggerHook(hookName, hookArgs) {
        for (const plugin of this.plugins){
            if (typeof plugin.getHooks === 'function') {
                let hooks = plugin.getHooks()[hookName];
                if (hooks) {
                    if (typeof hooks === 'function') hooks = [
                        hooks
                    ];
                    for (const hook of hooks){
                        await hook(this.config, ...hookArgs);
                    }
                }
            }
        }
    }
    async getHookListrTasks(hookName, hookArgs) {
        const tasks = [];
        for (const plugin of this.plugins){
            if (typeof plugin.getHooks === 'function') {
                let hooks = plugin.getHooks()[hookName];
                if (hooks) {
                    if (typeof hooks === 'function') hooks = [
                        hooks
                    ];
                    for (const hook of hooks){
                        tasks.push({
                            title: `${_chalk.default.cyan(`[plugin-${plugin.name}]`)} ${hook.__hookName || `Running ${_chalk.default.yellow(hookName)} hook`}`,
                            task: async (_, task)=>{
                                if (hook.__hookName) {
                                    // Also give it the task
                                    await hook.call(task, ...hookArgs);
                                } else {
                                    await hook(this.config, ...hookArgs);
                                }
                            },
                            options: {}
                        });
                    }
                }
            }
        }
        return tasks;
    }
    async triggerMutatingHook(hookName, ...item) {
        let result = item[0];
        for (const plugin of this.plugins){
            if (typeof plugin.getHooks === 'function') {
                let hooks = plugin.getHooks()[hookName];
                if (hooks) {
                    if (typeof hooks === 'function') hooks = [
                        hooks
                    ];
                    for (const hook of hooks){
                        result = await hook(this.config, ...item) || result;
                    }
                }
            }
        }
        return result;
    }
    async overrideStartLogic(opts) {
        let newStartFn;
        const claimed = [];
        for (const plugin of this.plugins){
            if (typeof plugin.startLogic === 'function' && plugin.startLogic !== _pluginBase.PluginBase.prototype.startLogic) {
                claimed.push(plugin.name);
                newStartFn = plugin.startLogic;
            }
        }
        if (claimed.length > 1) {
            throw new Error(`Multiple plugins tried to take control of the start command, please remove one of them\n --> ${claimed.join(', ')}`);
        }
        if (claimed.length === 1 && newStartFn) {
            d(`plugin: "${claimed[0]}" has taken control of the start command`);
            const result = await newStartFn(opts);
            if (typeof result === 'object' && 'tasks' in result) {
                result.tasks = result.tasks.map((task)=>({
                        ...task,
                        title: `${_chalk.default.cyan(`[plugin-${claimed[0]}]`)} ${task.title}`
                    })
                );
            }
            return result;
        }
        return false;
    }
}
exports.default = PluginInterface;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsL3BsdWdpbi1pbnRlcmZhY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGx1Z2luQmFzZSB9IGZyb20gJ0BlbGVjdHJvbi1mb3JnZS9wbHVnaW4tYmFzZSc7XG5pbXBvcnQge1xuICBGb3JnZUxpc3RyVGFza0RlZmluaXRpb24sXG4gIEZvcmdlTXV0YXRpbmdIb29rRm4sXG4gIEZvcmdlTXV0YXRpbmdIb29rU2lnbmF0dXJlcyxcbiAgRm9yZ2VTaW1wbGVIb29rRm4sXG4gIEZvcmdlU2ltcGxlSG9va1NpZ25hdHVyZXMsXG4gIElGb3JnZVBsdWdpbixcbiAgSUZvcmdlUGx1Z2luSW50ZXJmYWNlLFxuICBSZXNvbHZlZEZvcmdlQ29uZmlnLFxuICBTdGFydFJlc3VsdCxcbn0gZnJvbSAnQGVsZWN0cm9uLWZvcmdlL3NoYXJlZC10eXBlcyc7XG5pbXBvcnQgY2hhbGsgZnJvbSAnY2hhbGsnO1xuaW1wb3J0IGRlYnVnIGZyb20gJ2RlYnVnJztcblxuaW1wb3J0IHsgU3RhcnRPcHRpb25zIH0gZnJvbSAnLi4vYXBpJztcblxuaW1wb3J0IHJlcXVpcmVTZWFyY2ggZnJvbSAnLi9yZXF1aXJlLXNlYXJjaCc7XG5cbmNvbnN0IGQgPSBkZWJ1ZygnZWxlY3Ryb24tZm9yZ2U6cGx1Z2lucycpO1xuXG5mdW5jdGlvbiBpc0ZvcmdlUGx1Z2luKHBsdWdpbjogSUZvcmdlUGx1Z2luIHwgdW5rbm93bik6IHBsdWdpbiBpcyBJRm9yZ2VQbHVnaW4ge1xuICByZXR1cm4gKHBsdWdpbiBhcyBJRm9yZ2VQbHVnaW4pLl9faXNFbGVjdHJvbkZvcmdlUGx1Z2luO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQbHVnaW5JbnRlcmZhY2UgaW1wbGVtZW50cyBJRm9yZ2VQbHVnaW5JbnRlcmZhY2Uge1xuICBwcml2YXRlIHBsdWdpbnM6IElGb3JnZVBsdWdpbltdO1xuXG4gIHByaXZhdGUgY29uZmlnOiBSZXNvbHZlZEZvcmdlQ29uZmlnO1xuXG4gIGNvbnN0cnVjdG9yKGRpcjogc3RyaW5nLCBmb3JnZUNvbmZpZzogUmVzb2x2ZWRGb3JnZUNvbmZpZykge1xuICAgIHRoaXMucGx1Z2lucyA9IGZvcmdlQ29uZmlnLnBsdWdpbnMubWFwKChwbHVnaW4pID0+IHtcbiAgICAgIGlmIChpc0ZvcmdlUGx1Z2luKHBsdWdpbikpIHtcbiAgICAgICAgcmV0dXJuIHBsdWdpbjtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBwbHVnaW4gPT09ICdvYmplY3QnICYmICduYW1lJyBpbiBwbHVnaW4gJiYgJ2NvbmZpZycgaW4gcGx1Z2luKSB7XG4gICAgICAgIGNvbnN0IHsgbmFtZTogcGx1Z2luTmFtZSwgY29uZmlnOiBvcHRzIH0gPSBwbHVnaW47XG4gICAgICAgIGlmICh0eXBlb2YgcGx1Z2luTmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIHBsdWdpblswXSB0byBiZSBhIHN0cmluZyBidXQgZm91bmQgJHtwbHVnaW5OYW1lfWApO1xuICAgICAgICB9XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IFBsdWdpbiA9IHJlcXVpcmVTZWFyY2g8YW55PihkaXIsIFtwbHVnaW5OYW1lXSk7XG4gICAgICAgIGlmICghUGx1Z2luKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZmluZCBtb2R1bGUgd2l0aCBuYW1lOiAke3BsdWdpbk5hbWV9LiBNYWtlIHN1cmUgaXQncyBsaXN0ZWQgaW4gdGhlIGRldkRlcGVuZGVuY2llcyBvZiB5b3VyIHBhY2thZ2UuanNvbmApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUGx1Z2luKG9wdHMpO1xuICAgICAgfVxuXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIHBsdWdpbiB0byBlaXRoZXIgYmUgYSBwbHVnaW4gaW5zdGFuY2Ugb3IgYSB7IG5hbWUsIGNvbmZpZyB9IG9iamVjdCBidXQgZm91bmQgJHtwbHVnaW59YCk7XG4gICAgfSk7XG4gICAgLy8gVE9ETzogZml4IGhhY2tcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHRoaXMuY29uZmlnID0gbnVsbCBhcyBhbnk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdjb25maWcnLCB7XG4gICAgICB2YWx1ZTogZm9yZ2VDb25maWcsXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgfSk7XG5cbiAgICBmb3IgKGNvbnN0IHBsdWdpbiBvZiB0aGlzLnBsdWdpbnMpIHtcbiAgICAgIHBsdWdpbi5pbml0KGRpciwgZm9yZ2VDb25maWcpO1xuICAgIH1cblxuICAgIHRoaXMudHJpZ2dlckhvb2sgPSB0aGlzLnRyaWdnZXJIb29rLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vdmVycmlkZVN0YXJ0TG9naWMgPSB0aGlzLm92ZXJyaWRlU3RhcnRMb2dpYy5iaW5kKHRoaXMpO1xuICB9XG5cbiAgYXN5bmMgdHJpZ2dlckhvb2s8SG9vayBleHRlbmRzIGtleW9mIEZvcmdlU2ltcGxlSG9va1NpZ25hdHVyZXM+KGhvb2tOYW1lOiBIb29rLCBob29rQXJnczogRm9yZ2VTaW1wbGVIb29rU2lnbmF0dXJlc1tIb29rXSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGZvciAoY29uc3QgcGx1Z2luIG9mIHRoaXMucGx1Z2lucykge1xuICAgICAgaWYgKHR5cGVvZiBwbHVnaW4uZ2V0SG9va3MgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgbGV0IGhvb2tzID0gcGx1Z2luLmdldEhvb2tzKClbaG9va05hbWVdIGFzIEZvcmdlU2ltcGxlSG9va0ZuPEhvb2s+W10gfCBGb3JnZVNpbXBsZUhvb2tGbjxIb29rPjtcbiAgICAgICAgaWYgKGhvb2tzKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBob29rcyA9PT0gJ2Z1bmN0aW9uJykgaG9va3MgPSBbaG9va3NdO1xuICAgICAgICAgIGZvciAoY29uc3QgaG9vayBvZiBob29rcykge1xuICAgICAgICAgICAgYXdhaXQgaG9vayh0aGlzLmNvbmZpZywgLi4uaG9va0FyZ3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldEhvb2tMaXN0clRhc2tzPEhvb2sgZXh0ZW5kcyBrZXlvZiBGb3JnZVNpbXBsZUhvb2tTaWduYXR1cmVzPihcbiAgICBob29rTmFtZTogSG9vayxcbiAgICBob29rQXJnczogRm9yZ2VTaW1wbGVIb29rU2lnbmF0dXJlc1tIb29rXVxuICApOiBQcm9taXNlPEZvcmdlTGlzdHJUYXNrRGVmaW5pdGlvbltdPiB7XG4gICAgY29uc3QgdGFza3M6IEZvcmdlTGlzdHJUYXNrRGVmaW5pdGlvbltdID0gW107XG5cbiAgICBmb3IgKGNvbnN0IHBsdWdpbiBvZiB0aGlzLnBsdWdpbnMpIHtcbiAgICAgIGlmICh0eXBlb2YgcGx1Z2luLmdldEhvb2tzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGxldCBob29rcyA9IHBsdWdpbi5nZXRIb29rcygpW2hvb2tOYW1lXSBhcyBGb3JnZVNpbXBsZUhvb2tGbjxIb29rPltdIHwgRm9yZ2VTaW1wbGVIb29rRm48SG9vaz47XG4gICAgICAgIGlmIChob29rcykge1xuICAgICAgICAgIGlmICh0eXBlb2YgaG9va3MgPT09ICdmdW5jdGlvbicpIGhvb2tzID0gW2hvb2tzXTtcbiAgICAgICAgICBmb3IgKGNvbnN0IGhvb2sgb2YgaG9va3MpIHtcbiAgICAgICAgICAgIHRhc2tzLnB1c2goe1xuICAgICAgICAgICAgICB0aXRsZTogYCR7Y2hhbGsuY3lhbihgW3BsdWdpbi0ke3BsdWdpbi5uYW1lfV1gKX0gJHsoaG9vayBhcyBhbnkpLl9faG9va05hbWUgfHwgYFJ1bm5pbmcgJHtjaGFsay55ZWxsb3coaG9va05hbWUpfSBob29rYH1gLFxuICAgICAgICAgICAgICB0YXNrOiBhc3luYyAoXywgdGFzaykgPT4ge1xuICAgICAgICAgICAgICAgIGlmICgoaG9vayBhcyBhbnkpLl9faG9va05hbWUpIHtcbiAgICAgICAgICAgICAgICAgIC8vIEFsc28gZ2l2ZSBpdCB0aGUgdGFza1xuICAgICAgICAgICAgICAgICAgYXdhaXQgKGhvb2sgYXMgYW55KS5jYWxsKHRhc2ssIC4uLihob29rQXJncyBhcyBhbnlbXSkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBhd2FpdCBob29rKHRoaXMuY29uZmlnLCAuLi5ob29rQXJncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBvcHRpb25zOiB7fSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0YXNrcztcbiAgfVxuXG4gIGFzeW5jIHRyaWdnZXJNdXRhdGluZ0hvb2s8SG9vayBleHRlbmRzIGtleW9mIEZvcmdlTXV0YXRpbmdIb29rU2lnbmF0dXJlcz4oXG4gICAgaG9va05hbWU6IEhvb2ssXG4gICAgLi4uaXRlbTogRm9yZ2VNdXRhdGluZ0hvb2tTaWduYXR1cmVzW0hvb2tdXG4gICk6IFByb21pc2U8Rm9yZ2VNdXRhdGluZ0hvb2tTaWduYXR1cmVzW0hvb2tdWzBdPiB7XG4gICAgbGV0IHJlc3VsdDogRm9yZ2VNdXRhdGluZ0hvb2tTaWduYXR1cmVzW0hvb2tdWzBdID0gaXRlbVswXTtcbiAgICBmb3IgKGNvbnN0IHBsdWdpbiBvZiB0aGlzLnBsdWdpbnMpIHtcbiAgICAgIGlmICh0eXBlb2YgcGx1Z2luLmdldEhvb2tzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGxldCBob29rcyA9IHBsdWdpbi5nZXRIb29rcygpW2hvb2tOYW1lXSBhcyBGb3JnZU11dGF0aW5nSG9va0ZuPEhvb2s+W10gfCBGb3JnZU11dGF0aW5nSG9va0ZuPEhvb2s+O1xuICAgICAgICBpZiAoaG9va3MpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGhvb2tzID09PSAnZnVuY3Rpb24nKSBob29rcyA9IFtob29rc107XG4gICAgICAgICAgZm9yIChjb25zdCBob29rIG9mIGhvb2tzKSB7XG4gICAgICAgICAgICByZXN1bHQgPSAoYXdhaXQgaG9vayh0aGlzLmNvbmZpZywgLi4uaXRlbSkpIHx8IHJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGFzeW5jIG92ZXJyaWRlU3RhcnRMb2dpYyhvcHRzOiBTdGFydE9wdGlvbnMpOiBQcm9taXNlPFN0YXJ0UmVzdWx0PiB7XG4gICAgbGV0IG5ld1N0YXJ0Rm47XG4gICAgY29uc3QgY2xhaW1lZDogc3RyaW5nW10gPSBbXTtcbiAgICBmb3IgKGNvbnN0IHBsdWdpbiBvZiB0aGlzLnBsdWdpbnMpIHtcbiAgICAgIGlmICh0eXBlb2YgcGx1Z2luLnN0YXJ0TG9naWMgPT09ICdmdW5jdGlvbicgJiYgcGx1Z2luLnN0YXJ0TG9naWMgIT09IFBsdWdpbkJhc2UucHJvdG90eXBlLnN0YXJ0TG9naWMpIHtcbiAgICAgICAgY2xhaW1lZC5wdXNoKHBsdWdpbi5uYW1lKTtcbiAgICAgICAgbmV3U3RhcnRGbiA9IHBsdWdpbi5zdGFydExvZ2ljO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoY2xhaW1lZC5sZW5ndGggPiAxKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE11bHRpcGxlIHBsdWdpbnMgdHJpZWQgdG8gdGFrZSBjb250cm9sIG9mIHRoZSBzdGFydCBjb21tYW5kLCBwbGVhc2UgcmVtb3ZlIG9uZSBvZiB0aGVtXFxuIC0tPiAke2NsYWltZWQuam9pbignLCAnKX1gKTtcbiAgICB9XG4gICAgaWYgKGNsYWltZWQubGVuZ3RoID09PSAxICYmIG5ld1N0YXJ0Rm4pIHtcbiAgICAgIGQoYHBsdWdpbjogXCIke2NsYWltZWRbMF19XCIgaGFzIHRha2VuIGNvbnRyb2wgb2YgdGhlIHN0YXJ0IGNvbW1hbmRgKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG5ld1N0YXJ0Rm4ob3B0cyk7XG4gICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PT0gJ29iamVjdCcgJiYgJ3Rhc2tzJyBpbiByZXN1bHQpIHtcbiAgICAgICAgcmVzdWx0LnRhc2tzID0gcmVzdWx0LnRhc2tzLm1hcCgodGFzaykgPT4gKHtcbiAgICAgICAgICAuLi50YXNrLFxuICAgICAgICAgIHRpdGxlOiBgJHtjaGFsay5jeWFuKGBbcGx1Z2luLSR7Y2xhaW1lZFswXX1dYCl9ICR7dGFzay50aXRsZX1gLFxuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJkIiwiZGVidWciLCJpc0ZvcmdlUGx1Z2luIiwicGx1Z2luIiwiX19pc0VsZWN0cm9uRm9yZ2VQbHVnaW4iLCJQbHVnaW5JbnRlcmZhY2UiLCJkaXIiLCJmb3JnZUNvbmZpZyIsInBsdWdpbnMiLCJtYXAiLCJuYW1lIiwicGx1Z2luTmFtZSIsImNvbmZpZyIsIm9wdHMiLCJFcnJvciIsIlBsdWdpbiIsInJlcXVpcmVTZWFyY2giLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiaW5pdCIsInRyaWdnZXJIb29rIiwiYmluZCIsIm92ZXJyaWRlU3RhcnRMb2dpYyIsImhvb2tOYW1lIiwiaG9va0FyZ3MiLCJnZXRIb29rcyIsImhvb2tzIiwiaG9vayIsImdldEhvb2tMaXN0clRhc2tzIiwidGFza3MiLCJwdXNoIiwidGl0bGUiLCJjaGFsayIsImN5YW4iLCJfX2hvb2tOYW1lIiwieWVsbG93IiwidGFzayIsIl8iLCJjYWxsIiwib3B0aW9ucyIsInRyaWdnZXJNdXRhdGluZ0hvb2siLCJpdGVtIiwicmVzdWx0IiwibmV3U3RhcnRGbiIsImNsYWltZWQiLCJzdGFydExvZ2ljIiwiUGx1Z2luQmFzZSIsInByb3RvdHlwZSIsImxlbmd0aCIsImpvaW4iXSwibWFwcGluZ3MiOiI7Ozs7O0FBQTJCLEdBQTZCLENBQTdCLFdBQTZCO0FBWXRDLEdBQU8sQ0FBUCxNQUFPO0FBQ1AsR0FBTyxDQUFQLE1BQU87QUFJQyxHQUFrQixDQUFsQixjQUFrQjs7Ozs7O0FBRTVDLEtBQUssQ0FBQ0EsQ0FBQyxPQUFHQyxNQUFLLFVBQUMsQ0FBd0I7U0FFL0JDLGFBQWEsQ0FBQ0MsTUFBOEIsRUFBMEIsQ0FBQztJQUM5RSxNQUFNLENBQUVBLE1BQU0sQ0FBa0JDLHVCQUF1QjtBQUN6RCxDQUFDO01BRW9CQyxlQUFlO2dCQUt0QkMsR0FBVyxFQUFFQyxXQUFnQyxDQUFFLENBQUM7UUFDMUQsSUFBSSxDQUFDQyxPQUFPLEdBQUdELFdBQVcsQ0FBQ0MsT0FBTyxDQUFDQyxHQUFHLEVBQUVOLE1BQU0sR0FBSyxDQUFDO1lBQ2xELEVBQUUsRUFBRUQsYUFBYSxDQUFDQyxNQUFNLEdBQUcsQ0FBQztnQkFDMUIsTUFBTSxDQUFDQSxNQUFNO1lBQ2YsQ0FBQztZQUVELEVBQUUsRUFBRSxNQUFNLENBQUNBLE1BQU0sS0FBSyxDQUFRLFdBQUksQ0FBTSxTQUFJQSxNQUFNLElBQUksQ0FBUSxXQUFJQSxNQUFNLEVBQUUsQ0FBQztnQkFDekUsS0FBSyxDQUFDLENBQUMsQ0FBQ08sSUFBSSxFQUFFQyxVQUFVLEdBQUVDLE1BQU0sRUFBRUMsSUFBSSxFQUFDLENBQUMsR0FBR1YsTUFBTTtnQkFDakQsRUFBRSxFQUFFLE1BQU0sQ0FBQ1EsVUFBVSxLQUFLLENBQVEsU0FBRSxDQUFDO29CQUNuQyxLQUFLLENBQUMsR0FBRyxDQUFDRyxLQUFLLEVBQUUsNENBQTRDLEVBQUVILFVBQVU7Z0JBQzNFLENBQUM7Z0JBQ0QsRUFBOEQsQUFBOUQsNERB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