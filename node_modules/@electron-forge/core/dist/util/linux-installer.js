"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = exports.sudo = void 0;
var _childProcess = require("child_process");
var _util = require("util");
var _sudoPrompt = _interopRequireDefault(require("sudo-prompt"));
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// eslint-disable-next-line @typescript-eslint/no-explicit-any
const which = async (type, prog, promise)=>{
    if ((0, _childProcess).spawnSync('which', [
        prog
    ]).status === 0) {
        await promise();
    } else {
        throw new Error(`${prog} is required to install ${type} packages`);
    }
};
const sudo = (type, prog, args)=>which(type, prog, ()=>(0, _util).promisify(_sudoPrompt.default.exec)(`${prog} ${args}`, {
            name: 'Electron Forge'
        })
    )
;
exports.sudo = sudo;
var _default = which;
exports.default = _default;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsL2xpbnV4LWluc3RhbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzcGF3blN5bmMgfSBmcm9tICdjaGlsZF9wcm9jZXNzJztcbmltcG9ydCB7IHByb21pc2lmeSB9IGZyb20gJ3V0aWwnO1xuXG5pbXBvcnQgc3Vkb1Byb21wdCBmcm9tICdzdWRvLXByb21wdCc7XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5jb25zdCB3aGljaCA9IGFzeW5jICh0eXBlOiBzdHJpbmcsIHByb2c6IHN0cmluZywgcHJvbWlzZTogKCkgPT4gUHJvbWlzZTxhbnk+KTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gIGlmIChzcGF3blN5bmMoJ3doaWNoJywgW3Byb2ddKS5zdGF0dXMgPT09IDApIHtcbiAgICBhd2FpdCBwcm9taXNlKCk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGAke3Byb2d9IGlzIHJlcXVpcmVkIHRvIGluc3RhbGwgJHt0eXBlfSBwYWNrYWdlc2ApO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3Qgc3VkbyA9ICh0eXBlOiBzdHJpbmcsIHByb2c6IHN0cmluZywgYXJnczogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiA9PlxuICB3aGljaCh0eXBlLCBwcm9nLCAoKSA9PiBwcm9taXNpZnkoc3Vkb1Byb21wdC5leGVjKShgJHtwcm9nfSAke2FyZ3N9YCwgeyBuYW1lOiAnRWxlY3Ryb24gRm9yZ2UnIH0pKTtcblxuZXhwb3J0IGRlZmF1bHQgd2hpY2g7XG4iXSwibmFtZXMiOlsid2hpY2giLCJ0eXBlIiwicHJvZyIsInByb21pc2UiLCJzcGF3blN5bmMiLCJzdGF0dXMiLCJFcnJvciIsInN1ZG8iLCJhcmdzIiwicHJvbWlzaWZ5Iiwic3Vkb1Byb21wdCIsImV4ZWMiLCJuYW1lIl0sIm1hcHBpbmdzIjoiOzs7OztBQUEwQixHQUFlLENBQWYsYUFBZTtBQUNmLEdBQU0sQ0FBTixLQUFNO0FBRVQsR0FBYSxDQUFiLFdBQWE7Ozs7OztBQUVwQyxFQUE4RCxBQUE5RCw0REFBOEQ7QUFDOUQsS0FBSyxDQUFDQSxLQUFLLFVBQVVDLElBQVksRUFBRUMsSUFBWSxFQUFFQyxPQUEyQixHQUFvQixDQUFDO0lBQy9GLEVBQUUsTUFBRUMsYUFBUyxZQUFDLENBQU8sUUFBRSxDQUFDRjtRQUFBQSxJQUFJO0lBQUEsQ0FBQyxFQUFFRyxNQUFNLEtBQUssQ0FBQyxFQUFFLENBQUM7UUFDNUMsS0FBSyxDQUFDRixPQUFPO0lBQ2YsQ0FBQyxNQUFNLENBQUM7UUFDTixLQUFLLENBQUMsR0FBRyxDQUFDRyxLQUFLLElBQUlKLElBQUksQ0FBQyx3QkFBd0IsRUFBRUQsSUFBSSxDQUFDLFNBQVM7SUFDbEUsQ0FBQztBQUNILENBQUM7QUFFTSxLQUFLLENBQUNNLElBQUksSUFBSU4sSUFBWSxFQUFFQyxJQUFZLEVBQUVNLElBQVksR0FDM0RSLEtBQUssQ0FBQ0MsSUFBSSxFQUFFQyxJQUFJLFVBQVFPLEtBQVMsWUFBQ0MsV0FBVSxTQUFDQyxJQUFJLEtBQUtULElBQUksQ0FBQyxDQUFDLEVBQUVNLElBQUksSUFBSSxDQUFDO1lBQUNJLElBQUksRUFBRSxDQUFnQjtRQUFDLENBQUM7OztRQURyRkwsSUFBSSxHQUFKQSxJQUFJO2VBR0ZQLEtBQUsifQ==