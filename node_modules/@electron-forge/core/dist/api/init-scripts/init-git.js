"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.initGit = void 0;
var _childProcess = require("child_process");
var _debug = _interopRequireDefault(require("debug"));
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const d = (0, _debug).default('electron-forge:init:git');
const initGit = async (dir)=>{
    await new Promise((resolve, reject)=>{
        (0, _childProcess).exec('git rev-parse --show-toplevel', {
            cwd: dir
        }, (err)=>{
            if (err) {
                // not run within a Git repository
                d('executing "git init" in directory:', dir);
                (0, _childProcess).exec('git init', {
                    cwd: dir
                }, (initErr)=>initErr ? reject(initErr) : resolve()
                );
            } else {
                d('.git directory already exists, skipping git initialization');
                resolve();
            }
        });
    });
};
exports.initGit = initGit;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9hcGkvaW5pdC1zY3JpcHRzL2luaXQtZ2l0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGV4ZWMgfSBmcm9tICdjaGlsZF9wcm9jZXNzJztcblxuaW1wb3J0IGRlYnVnIGZyb20gJ2RlYnVnJztcblxuY29uc3QgZCA9IGRlYnVnKCdlbGVjdHJvbi1mb3JnZTppbml0OmdpdCcpO1xuXG5leHBvcnQgY29uc3QgaW5pdEdpdCA9IGFzeW5jIChkaXI6IHN0cmluZyk6IFByb21pc2U8dm9pZD4gPT4ge1xuICBhd2FpdCBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgZXhlYyhcbiAgICAgICdnaXQgcmV2LXBhcnNlIC0tc2hvdy10b3BsZXZlbCcsXG4gICAgICB7XG4gICAgICAgIGN3ZDogZGlyLFxuICAgICAgfSxcbiAgICAgIChlcnIpID0+IHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIC8vIG5vdCBydW4gd2l0aGluIGEgR2l0IHJlcG9zaXRvcnlcbiAgICAgICAgICBkKCdleGVjdXRpbmcgXCJnaXQgaW5pdFwiIGluIGRpcmVjdG9yeTonLCBkaXIpO1xuICAgICAgICAgIGV4ZWMoJ2dpdCBpbml0JywgeyBjd2Q6IGRpciB9LCAoaW5pdEVycikgPT4gKGluaXRFcnIgPyByZWplY3QoaW5pdEVycikgOiByZXNvbHZlKCkpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkKCcuZ2l0IGRpcmVjdG9yeSBhbHJlYWR5IGV4aXN0cywgc2tpcHBpbmcgZ2l0IGluaXRpYWxpemF0aW9uJyk7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcbiAgfSk7XG59O1xuIl0sIm5hbWVzIjpbImQiLCJkZWJ1ZyIsImluaXRHaXQiLCJkaXIiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImV4ZWMiLCJjd2QiLCJlcnIiLCJpbml0RXJyIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFxQixHQUFlLENBQWYsYUFBZTtBQUVsQixHQUFPLENBQVAsTUFBTzs7Ozs7O0FBRXpCLEtBQUssQ0FBQ0EsQ0FBQyxPQUFHQyxNQUFLLFVBQUMsQ0FBeUI7QUFFbEMsS0FBSyxDQUFDQyxPQUFPLFVBQVVDLEdBQVcsR0FBb0IsQ0FBQztJQUM1RCxLQUFLLENBQUMsR0FBRyxDQUFDQyxPQUFPLEVBQVFDLE9BQU8sRUFBRUMsTUFBTSxHQUFLLENBQUM7WUFDNUNDLGFBQUksT0FDRixDQUErQixnQ0FDL0IsQ0FBQztZQUNDQyxHQUFHLEVBQUVMLEdBQUc7UUFDVixDQUFDLEdBQ0FNLEdBQUcsR0FBSyxDQUFDO1lBQ1IsRUFBRSxFQUFFQSxHQUFHLEVBQUUsQ0FBQztnQkFDUixFQUFrQyxBQUFsQyxnQ0FBa0M7Z0JBQ2xDVCxDQUFDLENBQUMsQ0FBb0MscUNBQUVHLEdBQUc7b0JBQzNDSSxhQUFJLE9BQUMsQ0FBVSxXQUFFLENBQUM7b0JBQUNDLEdBQUcsRUFBRUwsR0FBRztnQkFBQyxDQUFDLEdBQUdPLE9BQU8sR0FBTUEsT0FBTyxHQUFHSixNQUFNLENBQUNJLE9BQU8sSUFBSUwsT0FBTzs7WUFDbEYsQ0FBQyxNQUFNLENBQUM7Z0JBQ05MLENBQUMsQ0FBQyxDQUE0RDtnQkFDOURLLE9BQU87WUFDVCxDQUFDO1FBQ0gsQ0FBQztJQUVMLENBQUM7QUFDSCxDQUFDO1FBbkJZSCxPQUFPLEdBQVBBLE9BQU8ifQ==