"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.initDirectory = void 0;
var _debug = _interopRequireDefault(require("debug"));
var _fsExtra = _interopRequireDefault(require("fs-extra"));
var _logSymbols = _interopRequireDefault(require("log-symbols"));
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const d = (0, _debug).default('electron-forge:init:directory');
const initDirectory = async (dir, task, force = false)=>{
    d('creating directory:', dir);
    await _fsExtra.default.mkdirs(dir);
    const files = await _fsExtra.default.readdir(dir);
    if (files.length !== 0) {
        d(`found ${files.length} files in the directory.  warning the user`);
        if (force) {
            task.output = `${_logSymbols.default.warning} The specified path "${dir}" is not empty. "force" was set to true, so proceeding to initialize. Files may be overwritten`;
        } else {
            throw new Error(`The specified path: "${dir}" is not empty.  Please ensure it is empty before initializing a new project`);
        }
    }
};
exports.initDirectory = initDirectory;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9hcGkvaW5pdC1zY3JpcHRzL2luaXQtZGlyZWN0b3J5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZvcmdlTGlzdHJUYXNrIH0gZnJvbSAnQGVsZWN0cm9uLWZvcmdlL3NoYXJlZC10eXBlcyc7XG5pbXBvcnQgZGVidWcgZnJvbSAnZGVidWcnO1xuaW1wb3J0IGZzIGZyb20gJ2ZzLWV4dHJhJztcbmltcG9ydCBsb2dTeW1ib2xzIGZyb20gJ2xvZy1zeW1ib2xzJztcblxuY29uc3QgZCA9IGRlYnVnKCdlbGVjdHJvbi1mb3JnZTppbml0OmRpcmVjdG9yeScpO1xuXG5leHBvcnQgY29uc3QgaW5pdERpcmVjdG9yeSA9IGFzeW5jIChkaXI6IHN0cmluZywgdGFzazogRm9yZ2VMaXN0clRhc2s8YW55PiwgZm9yY2UgPSBmYWxzZSk6IFByb21pc2U8dm9pZD4gPT4ge1xuICBkKCdjcmVhdGluZyBkaXJlY3Rvcnk6JywgZGlyKTtcbiAgYXdhaXQgZnMubWtkaXJzKGRpcik7XG5cbiAgY29uc3QgZmlsZXMgPSBhd2FpdCBmcy5yZWFkZGlyKGRpcik7XG4gIGlmIChmaWxlcy5sZW5ndGggIT09IDApIHtcbiAgICBkKGBmb3VuZCAke2ZpbGVzLmxlbmd0aH0gZmlsZXMgaW4gdGhlIGRpcmVjdG9yeS4gIHdhcm5pbmcgdGhlIHVzZXJgKTtcblxuICAgIGlmIChmb3JjZSkge1xuICAgICAgdGFzay5vdXRwdXQgPSBgJHtsb2dTeW1ib2xzLndhcm5pbmd9IFRoZSBzcGVjaWZpZWQgcGF0aCBcIiR7ZGlyfVwiIGlzIG5vdCBlbXB0eS4gXCJmb3JjZVwiIHdhcyBzZXQgdG8gdHJ1ZSwgc28gcHJvY2VlZGluZyB0byBpbml0aWFsaXplLiBGaWxlcyBtYXkgYmUgb3ZlcndyaXR0ZW5gO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBzcGVjaWZpZWQgcGF0aDogXCIke2Rpcn1cIiBpcyBub3QgZW1wdHkuICBQbGVhc2UgZW5zdXJlIGl0IGlzIGVtcHR5IGJlZm9yZSBpbml0aWFsaXppbmcgYSBuZXcgcHJvamVjdGApO1xuICAgIH1cbiAgfVxufTtcbiJdLCJuYW1lcyI6WyJkIiwiZGVidWciLCJpbml0RGlyZWN0b3J5IiwiZGlyIiwidGFzayIsImZvcmNlIiwiZnMiLCJta2RpcnMiLCJmaWxlcyIsInJlYWRkaXIiLCJsZW5ndGgiLCJvdXRwdXQiLCJsb2dTeW1ib2xzIiwid2FybmluZyIsIkVycm9yIl0sIm1hcHBpbmdzIjoiOzs7OztBQUNrQixHQUFPLENBQVAsTUFBTztBQUNWLEdBQVUsQ0FBVixRQUFVO0FBQ0YsR0FBYSxDQUFiLFdBQWE7Ozs7OztBQUVwQyxLQUFLLENBQUNBLENBQUMsT0FBR0MsTUFBSyxVQUFDLENBQStCO0FBRXhDLEtBQUssQ0FBQ0MsYUFBYSxVQUFVQyxHQUFXLEVBQUVDLElBQXlCLEVBQUVDLEtBQUssR0FBRyxLQUFLLEdBQW9CLENBQUM7SUFDNUdMLENBQUMsQ0FBQyxDQUFxQixzQkFBRUcsR0FBRztJQUM1QixLQUFLLENBQUNHLFFBQUUsU0FBQ0MsTUFBTSxDQUFDSixHQUFHO0lBRW5CLEtBQUssQ0FBQ0ssS0FBSyxHQUFHLEtBQUssQ0FBQ0YsUUFBRSxTQUFDRyxPQUFPLENBQUNOLEdBQUc7SUFDbEMsRUFBRSxFQUFFSyxLQUFLLENBQUNFLE1BQU0sS0FBSyxDQUFDLEVBQUUsQ0FBQztRQUN2QlYsQ0FBQyxFQUFFLE1BQU0sRUFBRVEsS0FBSyxDQUFDRSxNQUFNLENBQUMsMENBQTBDO1FBRWxFLEVBQUUsRUFBRUwsS0FBSyxFQUFFLENBQUM7WUFDVkQsSUFBSSxDQUFDTyxNQUFNLE1BQU1DLFdBQVUsU0FBQ0MsT0FBTyxDQUFDLHFCQUFxQixFQUFFVixHQUFHLENBQUMsOEZBQThGO1FBQy9KLENBQUMsTUFBTSxDQUFDO1lBQ04sS0FBSyxDQUFDLEdBQUcsQ0FBQ1csS0FBSyxFQUFFLHFCQUFxQixFQUFFWCxHQUFHLENBQUMsNEVBQTRFO1FBQzFILENBQUM7SUFDSCxDQUFDO0FBQ0gsQ0FBQztRQWRZRCxhQUFhLEdBQWJBLGFBQWEifQ==