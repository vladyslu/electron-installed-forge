"use strict";
var _path = _interopRequireDefault(require("path"));
var _core = require("@electron-forge/core");
var _get = require("@electron/get");
var _commander = _interopRequireDefault(require("commander"));
var _fsExtra = _interopRequireDefault(require("fs-extra"));
require("./util/terminate");
var _workingDir = _interopRequireDefault(require("./util/working-dir"));
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
(async ()=>{
    let dir = process.cwd();
    _commander.default.version((await _fsExtra.default.readJson(_path.default.resolve(__dirname, '../package.json'))).version).arguments('[cwd]').option('-a, --arch [arch]', 'Target architecture').option('-p, --platform [platform]', 'Target build platform').action((cwd)=>{
        dir = (0, _workingDir).default(dir, cwd);
    }).parse(process.argv);
    (0, _get).initializeProxy();
    const packageOpts = {
        dir,
        interactive: true
    };
    if (_commander.default.arch) packageOpts.arch = _commander.default.arch;
    if (_commander.default.platform) packageOpts.platform = _commander.default.platform;
    await _core.api.package(packageOpts);
})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9lbGVjdHJvbi1mb3JnZS1wYWNrYWdlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuXG5pbXBvcnQgeyBhcGksIFBhY2thZ2VPcHRpb25zIH0gZnJvbSAnQGVsZWN0cm9uLWZvcmdlL2NvcmUnO1xuaW1wb3J0IHsgaW5pdGlhbGl6ZVByb3h5IH0gZnJvbSAnQGVsZWN0cm9uL2dldCc7XG5pbXBvcnQgcHJvZ3JhbSBmcm9tICdjb21tYW5kZXInO1xuaW1wb3J0IGZzIGZyb20gJ2ZzLWV4dHJhJztcblxuaW1wb3J0ICcuL3V0aWwvdGVybWluYXRlJztcbmltcG9ydCB3b3JraW5nRGlyIGZyb20gJy4vdXRpbC93b3JraW5nLWRpcic7XG5cbihhc3luYyAoKSA9PiB7XG4gIGxldCBkaXI6IHN0cmluZyA9IHByb2Nlc3MuY3dkKCk7XG4gIHByb2dyYW1cbiAgICAudmVyc2lvbigoYXdhaXQgZnMucmVhZEpzb24ocGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJy4uL3BhY2thZ2UuanNvbicpKSkudmVyc2lvbilcbiAgICAuYXJndW1lbnRzKCdbY3dkXScpXG4gICAgLm9wdGlvbignLWEsIC0tYXJjaCBbYXJjaF0nLCAnVGFyZ2V0IGFyY2hpdGVjdHVyZScpXG4gICAgLm9wdGlvbignLXAsIC0tcGxhdGZvcm0gW3BsYXRmb3JtXScsICdUYXJnZXQgYnVpbGQgcGxhdGZvcm0nKVxuICAgIC5hY3Rpb24oKGN3ZCkgPT4ge1xuICAgICAgZGlyID0gd29ya2luZ0RpcihkaXIsIGN3ZCk7XG4gICAgfSlcbiAgICAucGFyc2UocHJvY2Vzcy5hcmd2KTtcblxuICBpbml0aWFsaXplUHJveHkoKTtcblxuICBjb25zdCBwYWNrYWdlT3B0czogUGFja2FnZU9wdGlvbnMgPSB7XG4gICAgZGlyLFxuICAgIGludGVyYWN0aXZlOiB0cnVlLFxuICB9O1xuICBpZiAocHJvZ3JhbS5hcmNoKSBwYWNrYWdlT3B0cy5hcmNoID0gcHJvZ3JhbS5hcmNoO1xuICBpZiAocHJvZ3JhbS5wbGF0Zm9ybSkgcGFja2FnZU9wdHMucGxhdGZvcm0gPSBwcm9ncmFtLnBsYXRmb3JtO1xuXG4gIGF3YWl0IGFwaS5wYWNrYWdlKHBhY2thZ2VPcHRzKTtcbn0pKCk7XG4iXSwibmFtZXMiOlsiZGlyIiwicHJvY2VzcyIsImN3ZCIsInByb2dyYW0iLCJ2ZXJzaW9uIiwiZnMiLCJyZWFkSnNvbiIsInBhdGgiLCJyZXNvbHZlIiwiX19kaXJuYW1lIiwiYXJndW1lbnRzIiwib3B0aW9uIiwiYWN0aW9uIiwid29ya2luZ0RpciIsInBhcnNlIiwiYXJndiIsImluaXRpYWxpemVQcm94eSIsInBhY2thZ2VPcHRzIiwiaW50ZXJhY3RpdmUiLCJhcmNoIiwicGxhdGZvcm0iLCJhcGkiLCJwYWNrYWdlIl0sIm1hcHBpbmdzIjoiO0FBQWlCLEdBQU0sQ0FBTixLQUFNO0FBRWEsR0FBc0IsQ0FBdEIsS0FBc0I7QUFDMUIsR0FBZSxDQUFmLElBQWU7QUFDM0IsR0FBVyxDQUFYLFVBQVc7QUFDaEIsR0FBVSxDQUFWLFFBQVU7O0FBR0YsR0FBb0IsQ0FBcEIsV0FBb0I7Ozs7OztXQUU5QixDQUFDO0lBQ1osR0FBRyxDQUFDQSxHQUFHLEdBQVdDLE9BQU8sQ0FBQ0MsR0FBRztJQUM3QkMsVUFBTyxTQUNKQyxPQUFPLEVBQUUsS0FBSyxDQUFDQyxRQUFFLFNBQUNDLFFBQVEsQ0FBQ0MsS0FBSSxTQUFDQyxPQUFPLENBQUNDLFNBQVMsRUFBRSxDQUFpQixvQkFBSUwsT0FBTyxFQUMvRU0sU0FBUyxDQUFDLENBQU8sUUFDakJDLE1BQU0sQ0FBQyxDQUFtQixvQkFBRSxDQUFxQixzQkFDakRBLE1BQU0sQ0FBQyxDQUEyQiw0QkFBRSxDQUF1Qix3QkFDM0RDLE1BQU0sRUFBRVYsR0FBRyxHQUFLLENBQUM7UUFDaEJGLEdBQUcsT0FBR2EsV0FBVSxVQUFDYixHQUFHLEVBQUVFLEdBQUc7SUFDM0IsQ0FBQyxFQUNBWSxLQUFLLENBQUNiLE9BQU8sQ0FBQ2MsSUFBSTtRQUVyQkMsSUFBZTtJQUVmLEtBQUssQ0FBQ0MsV0FBVyxHQUFtQixDQUFDO1FBQ25DakIsR0FBRztRQUNIa0IsV0FBVyxFQUFFLElBQUk7SUFDbkIsQ0FBQztJQUNELEVBQUUsRUFBRWYsVUFBTyxTQUFDZ0IsSUFBSSxFQUFFRixXQUFXLENBQUNFLElBQUksR0FBR2hCLFVBQU8sU0FBQ2dCLElBQUk7SUFDakQsRUFBRSxFQUFFaEIsVUFBTyxTQUFDaUIsUUFBUSxFQUFFSCxXQUFXLENBQUNHLFFBQVEsR0FBR2pCLFVBQU8sU0FBQ2lCLFFBQVE7SUFFN0QsS0FBSyxDQUFDQyxLQUFHLEtBQUNDLE9BQU8sQ0FBQ0wsV0FBVztBQUMvQixDQUFDIn0=