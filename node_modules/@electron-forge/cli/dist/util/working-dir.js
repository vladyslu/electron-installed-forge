"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = workingDir;
var _path = _interopRequireDefault(require("path"));
var _fsExtra = _interopRequireDefault(require("fs-extra"));
function workingDir(dir, cwd, checkExisting = true) {
    let finalDir = dir;
    if (cwd) {
        if (_path.default.isAbsolute(cwd) && (!checkExisting || _fsExtra.default.existsSync(cwd))) {
            finalDir = cwd;
        } else {
            const resolved = _path.default.resolve(finalDir, cwd);
            if (!checkExisting || _fsExtra.default.existsSync(resolved)) {
                finalDir = resolved;
            }
        }
    }
    return finalDir;
}
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsL3dvcmtpbmctZGlyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuXG5pbXBvcnQgZnMgZnJvbSAnZnMtZXh0cmEnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB3b3JraW5nRGlyKGRpcjogc3RyaW5nLCBjd2Q6IHN0cmluZywgY2hlY2tFeGlzdGluZyA9IHRydWUpOiBzdHJpbmcge1xuICBsZXQgZmluYWxEaXIgPSBkaXI7XG4gIGlmIChjd2QpIHtcbiAgICBpZiAocGF0aC5pc0Fic29sdXRlKGN3ZCkgJiYgKCFjaGVja0V4aXN0aW5nIHx8IGZzLmV4aXN0c1N5bmMoY3dkKSkpIHtcbiAgICAgIGZpbmFsRGlyID0gY3dkO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCByZXNvbHZlZCA9IHBhdGgucmVzb2x2ZShmaW5hbERpciwgY3dkKTtcbiAgICAgIGlmICghY2hlY2tFeGlzdGluZyB8fCBmcy5leGlzdHNTeW5jKHJlc29sdmVkKSkge1xuICAgICAgICBmaW5hbERpciA9IHJlc29sdmVkO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmaW5hbERpcjtcbn1cbiJdLCJuYW1lcyI6WyJ3b3JraW5nRGlyIiwiZGlyIiwiY3dkIiwiY2hlY2tFeGlzdGluZyIsImZpbmFsRGlyIiwicGF0aCIsImlzQWJzb2x1dGUiLCJmcyIsImV4aXN0c1N5bmMiLCJyZXNvbHZlZCIsInJlc29sdmUiXSwibWFwcGluZ3MiOiI7Ozs7a0JBSXdCQSxVQUFVO0FBSmpCLEdBQU0sQ0FBTixLQUFNO0FBRVIsR0FBVSxDQUFWLFFBQVU7U0FFREEsVUFBVSxDQUFDQyxHQUFXLEVBQUVDLEdBQVcsRUFBRUMsYUFBYSxHQUFHLElBQUksRUFBVSxDQUFDO0lBQzFGLEdBQUcsQ0FBQ0MsUUFBUSxHQUFHSCxHQUFHO0lBQ2xCLEVBQUUsRUFBRUMsR0FBRyxFQUFFLENBQUM7UUFDUixFQUFFLEVBQUVHLEtBQUksU0FBQ0MsVUFBVSxDQUFDSixHQUFHLE9BQU9DLGFBQWEsSUFBSUksUUFBRSxTQUFDQyxVQUFVLENBQUNOLEdBQUcsSUFBSSxDQUFDO1lBQ25FRSxRQUFRLEdBQUdGLEdBQUc7UUFDaEIsQ0FBQyxNQUFNLENBQUM7WUFDTixLQUFLLENBQUNPLFFBQVEsR0FBR0osS0FBSSxTQUFDSyxPQUFPLENBQUNOLFFBQVEsRUFBRUYsR0FBRztZQUMzQyxFQUFFLEdBQUdDLGFBQWEsSUFBSUksUUFBRSxTQUFDQyxVQUFVLENBQUNDLFFBQVEsR0FBRyxDQUFDO2dCQUM5Q0wsUUFBUSxHQUFHSyxRQUFRO1lBQ3JCLENBQUM7UUFDSCxDQUFDO0lBQ0gsQ0FBQztJQUVELE1BQU0sQ0FBQ0wsUUFBUTtBQUNqQixDQUFDIn0=