"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.hasYarn = exports.yarnOrNpmSpawn = exports.safeYarnOrNpm = void 0;
var _crossSpawnPromise = require("@malept/cross-spawn-promise");
var _chalk = _interopRequireDefault(require("chalk"));
var _logSymbols = _interopRequireDefault(require("log-symbols"));
var _yarnOrNpm = _interopRequireDefault(require("yarn-or-npm"));
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const safeYarnOrNpm = ()=>{
    const system = (0, _yarnOrNpm).default();
    switch(process.env.NODE_INSTALLER){
        case 'yarn':
        case 'npm':
            return process.env.NODE_INSTALLER;
        default:
            if (process.env.NODE_INSTALLER) {
                console.warn(_logSymbols.default.warning, _chalk.default.yellow(`Unknown NODE_INSTALLER, using detected installer ${system}`));
            }
            return system;
    }
};
exports.safeYarnOrNpm = safeYarnOrNpm;
const yarnOrNpmSpawn = (args, opts)=>(0, _crossSpawnPromise).spawn(safeYarnOrNpm(), args, opts)
;
exports.yarnOrNpmSpawn = yarnOrNpmSpawn;
const hasYarn = ()=>safeYarnOrNpm() === 'yarn'
;
exports.hasYarn = hasYarn;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy95YXJuLW9yLW5wbS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDcm9zc1NwYXduQXJncywgQ3Jvc3NTcGF3bk9wdGlvbnMsIHNwYXduIH0gZnJvbSAnQG1hbGVwdC9jcm9zcy1zcGF3bi1wcm9taXNlJztcbmltcG9ydCBjaGFsayBmcm9tICdjaGFsayc7XG5pbXBvcnQgbG9nU3ltYm9scyBmcm9tICdsb2ctc3ltYm9scyc7XG5pbXBvcnQgeWFybk9yTnBtIGZyb20gJ3lhcm4tb3ItbnBtJztcblxuZXhwb3J0IGNvbnN0IHNhZmVZYXJuT3JOcG0gPSAoKSA9PiB7XG4gIGNvbnN0IHN5c3RlbSA9IHlhcm5Pck5wbSgpO1xuICBzd2l0Y2ggKHByb2Nlc3MuZW52Lk5PREVfSU5TVEFMTEVSKSB7XG4gICAgY2FzZSAneWFybic6XG4gICAgY2FzZSAnbnBtJzpcbiAgICAgIHJldHVybiBwcm9jZXNzLmVudi5OT0RFX0lOU1RBTExFUjtcbiAgICBkZWZhdWx0OlxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfSU5TVEFMTEVSKSB7XG4gICAgICAgIGNvbnNvbGUud2Fybihsb2dTeW1ib2xzLndhcm5pbmcsIGNoYWxrLnllbGxvdyhgVW5rbm93biBOT0RFX0lOU1RBTExFUiwgdXNpbmcgZGV0ZWN0ZWQgaW5zdGFsbGVyICR7c3lzdGVtfWApKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzeXN0ZW07XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCB5YXJuT3JOcG1TcGF3biA9IChhcmdzPzogQ3Jvc3NTcGF3bkFyZ3MsIG9wdHM/OiBDcm9zc1NwYXduT3B0aW9ucyk6IFByb21pc2U8c3RyaW5nPiA9PiBzcGF3bihzYWZlWWFybk9yTnBtKCksIGFyZ3MsIG9wdHMpO1xuXG5leHBvcnQgY29uc3QgaGFzWWFybiA9ICgpOiBib29sZWFuID0+IHNhZmVZYXJuT3JOcG0oKSA9PT0gJ3lhcm4nO1xuIl0sIm5hbWVzIjpbInNhZmVZYXJuT3JOcG0iLCJzeXN0ZW0iLCJ5YXJuT3JOcG0iLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9JTlNUQUxMRVIiLCJjb25zb2xlIiwid2FybiIsImxvZ1N5bWJvbHMiLCJ3YXJuaW5nIiwiY2hhbGsiLCJ5ZWxsb3ciLCJ5YXJuT3JOcG1TcGF3biIsImFyZ3MiLCJvcHRzIiwic3Bhd24iLCJoYXNZYXJuIl0sIm1hcHBpbmdzIjoiOzs7OztBQUF5RCxHQUE2QixDQUE3QixrQkFBNkI7QUFDcEUsR0FBTyxDQUFQLE1BQU87QUFDRixHQUFhLENBQWIsV0FBYTtBQUNkLEdBQWEsQ0FBYixVQUFhOzs7Ozs7QUFFNUIsS0FBSyxDQUFDQSxhQUFhLE9BQVMsQ0FBQztJQUNsQyxLQUFLLENBQUNDLE1BQU0sT0FBR0MsVUFBUztJQUN4QixNQUFNLENBQUVDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxjQUFjO1FBQ2hDLElBQUksQ0FBQyxDQUFNO1FBQ1gsSUFBSSxDQUFDLENBQUs7WUFDUixNQUFNLENBQUNGLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxjQUFjOztZQUVqQyxFQUFFLEVBQUVGLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxjQUFjLEVBQUUsQ0FBQztnQkFDL0JDLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDQyxXQUFVLFNBQUNDLE9BQU8sRUFBRUMsTUFBSyxTQUFDQyxNQUFNLEVBQUUsaURBQWlELEVBQUVWLE1BQU07WUFDMUcsQ0FBQztZQUNELE1BQU0sQ0FBQ0EsTUFBTTs7QUFFbkIsQ0FBQztRQVpZRCxhQUFhLEdBQWJBLGFBQWE7QUFjbkIsS0FBSyxDQUFDWSxjQUFjLElBQUlDLElBQXFCLEVBQUVDLElBQXdCLE9BQXNCQyxrQkFBSyxRQUFDZixhQUFhLElBQUlhLElBQUksRUFBRUMsSUFBSTs7UUFBeEhGLGNBQWMsR0FBZEEsY0FBYztBQUVwQixLQUFLLENBQUNJLE9BQU8sT0FBa0JoQixhQUFhLE9BQU8sQ0FBTTs7UUFBbkRnQixPQUFPLEdBQVBBLE9BQU8ifQ==