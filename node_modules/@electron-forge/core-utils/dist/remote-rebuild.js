"use strict";
var _rebuild = require("@electron/rebuild");
if (!process.send) {
    console.error('The remote rebuilder expects to be spawned with an IPC channel');
    // eslint-disable-next-line no-process-exit
    process.exit(1);
}
const options = JSON.parse(process.argv[2]);
const rebuilder = (0, _rebuild).rebuild(options);
rebuilder.lifecycle.on('module-found', ()=>{
    var ref;
    return (ref = process.send) === null || ref === void 0 ? void 0 : ref.call(process, {
        msg: 'module-found'
    });
});
rebuilder.lifecycle.on('module-done', ()=>{
    var ref;
    return (ref = process.send) === null || ref === void 0 ? void 0 : ref.call(process, {
        msg: 'module-done'
    });
});
rebuilder.then(()=>{
    var ref;
    (ref = process.send) === null || ref === void 0 ? void 0 : ref.call(process, {
        msg: 'rebuild-done'
    });
    // eslint-disable-next-line no-process-exit
    return process.exit(0);
}).catch((err)=>{
    var ref;
    (ref = process.send) === null || ref === void 0 ? void 0 : ref.call(process, {
        msg: 'rebuild-error',
        err: {
            message: err.message,
            stack: err.stack
        }
    });
    // eslint-disable-next-line no-process-exit
    process.exit(0);
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9yZW1vdGUtcmVidWlsZC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZWJ1aWxkLCBSZWJ1aWxkT3B0aW9ucyB9IGZyb20gJ0BlbGVjdHJvbi9yZWJ1aWxkJztcblxuaWYgKCFwcm9jZXNzLnNlbmQpIHtcbiAgY29uc29sZS5lcnJvcignVGhlIHJlbW90ZSByZWJ1aWxkZXIgZXhwZWN0cyB0byBiZSBzcGF3bmVkIHdpdGggYW4gSVBDIGNoYW5uZWwnKTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXByb2Nlc3MtZXhpdFxuICBwcm9jZXNzLmV4aXQoMSk7XG59XG5cbmNvbnN0IG9wdGlvbnM6IFJlYnVpbGRPcHRpb25zID0gSlNPTi5wYXJzZShwcm9jZXNzLmFyZ3ZbMl0pO1xuXG5jb25zdCByZWJ1aWxkZXIgPSByZWJ1aWxkKG9wdGlvbnMpO1xuXG5yZWJ1aWxkZXIubGlmZWN5Y2xlLm9uKCdtb2R1bGUtZm91bmQnLCAoKSA9PiBwcm9jZXNzLnNlbmQ/Lih7IG1zZzogJ21vZHVsZS1mb3VuZCcgfSkpO1xucmVidWlsZGVyLmxpZmVjeWNsZS5vbignbW9kdWxlLWRvbmUnLCAoKSA9PiBwcm9jZXNzLnNlbmQ/Lih7IG1zZzogJ21vZHVsZS1kb25lJyB9KSk7XG5cbnJlYnVpbGRlclxuICAudGhlbigoKSA9PiB7XG4gICAgcHJvY2Vzcy5zZW5kPy4oeyBtc2c6ICdyZWJ1aWxkLWRvbmUnIH0pO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm9jZXNzLWV4aXRcbiAgICByZXR1cm4gcHJvY2Vzcy5leGl0KDApO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIHByb2Nlc3Muc2VuZD8uKHtcbiAgICAgIG1zZzogJ3JlYnVpbGQtZXJyb3InLFxuICAgICAgZXJyOiB7XG4gICAgICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlLFxuICAgICAgICBzdGFjazogZXJyLnN0YWNrLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvY2Vzcy1leGl0XG4gICAgcHJvY2Vzcy5leGl0KDApO1xuICB9KTtcbiJdLCJuYW1lcyI6WyJwcm9jZXNzIiwic2VuZCIsImNvbnNvbGUiLCJlcnJvciIsImV4aXQiLCJvcHRpb25zIiwiSlNPTiIsInBhcnNlIiwiYXJndiIsInJlYnVpbGRlciIsInJlYnVpbGQiLCJsaWZlY3ljbGUiLCJvbiIsIm1zZyIsInRoZW4iLCJjYXRjaCIsImVyciIsIm1lc3NhZ2UiLCJzdGFjayJdLCJtYXBwaW5ncyI6IjtBQUF3QyxHQUFtQixDQUFuQixRQUFtQjtBQUUzRCxFQUFFLEdBQUdBLE9BQU8sQ0FBQ0MsSUFBSSxFQUFFLENBQUM7SUFDbEJDLE9BQU8sQ0FBQ0MsS0FBSyxDQUFDLENBQWdFO0lBQzlFLEVBQTJDLEFBQTNDLHlDQUEyQztJQUMzQ0gsT0FBTyxDQUFDSSxJQUFJLENBQUMsQ0FBQztBQUNoQixDQUFDO0FBRUQsS0FBSyxDQUFDQyxPQUFPLEdBQW1CQyxJQUFJLENBQUNDLEtBQUssQ0FBQ1AsT0FBTyxDQUFDUSxJQUFJLENBQUMsQ0FBQztBQUV6RCxLQUFLLENBQUNDLFNBQVMsT0FBR0MsUUFBTyxVQUFDTCxPQUFPO0FBRWpDSSxTQUFTLENBQUNFLFNBQVMsQ0FBQ0MsRUFBRSxDQUFDLENBQWM7UUFBUVosR0FBWTtJQUFaQSxNQUFNLEVBQU5BLEdBQVksR0FBWkEsT0FBTyxDQUFDQyxJQUFJLGNBQVpELEdBQVksS0FBWkEsSUFBSSxDQUFKQSxDQUF1QyxHQUF2Q0EsSUFBSSxDQUFKQSxDQUF1QyxHQUF2Q0EsR0FBWSxDQUFaQSxJQUF1QyxDQUF2Q0EsT0FBTyxFQUFRLENBQUM7UUFBQ2EsR0FBRyxFQUFFLENBQWM7SUFBQyxDQUFDOztBQUNuRkosU0FBUyxDQUFDRSxTQUFTLENBQUNDLEVBQUUsQ0FBQyxDQUFhO1FBQVFaLEdBQVk7SUFBWkEsTUFBTSxFQUFOQSxHQUFZLEdBQVpBLE9BQU8sQ0FBQ0MsSUFBSSxjQUFaRCxHQUFZLEtBQVpBLElBQUksQ0FBSkEsQ0FBc0MsR0FBdENBLElBQUksQ0FBSkEsQ0FBc0MsR0FBdENBLEdBQVksQ0FBWkEsSUFBc0MsQ0FBdENBLE9BQU8sRUFBUSxDQUFDO1FBQUNhLEdBQUcsRUFBRSxDQUFhO0lBQUMsQ0FBQzs7QUFFakZKLFNBQVMsQ0FDTkssSUFBSSxLQUFPLENBQUM7UUFDWGQsR0FBWTtLQUFaQSxHQUFZLEdBQVpBLE9BQU8sQ0FBQ0MsSUFBSSxjQUFaRCxHQUFZLEtBQVpBLElBQUksQ0FBSkEsQ0FBdUMsR0FBdkNBLElBQUksQ0FBSkEsQ0FBdUMsR0FBdkNBLEdBQVksQ0FBWkEsSUFBdUMsQ0FBdkNBLE9BQU8sRUFBUSxDQUFDO1FBQUNhLEdBQUcsRUFBRSxDQUFjO0lBQUMsQ0FBQztJQUN0QyxFQUEyQyxBQUEzQyx5Q0FBMkM7SUFDM0MsTUFBTSxDQUFDYixPQUFPLENBQUNJLElBQUksQ0FBQyxDQUFDO0FBQ3ZCLENBQUMsRUFDQVcsS0FBSyxFQUFFQyxHQUFHLEdBQUssQ0FBQztRQUNmaEIsR0FBWTtLQUFaQSxHQUFZLEdBQVpBLE9BQU8sQ0FBQ0MsSUFBSSxjQUFaRCxHQUFZLEtBQVpBLElBQUksQ0FBSkEsQ0FNRSxHQU5GQSxJQUFJLENBQUpBLENBTUUsR0FORkEsR0FBWSxDQUFaQSxJQU1FLENBTkZBLE9BQU8sRUFBUSxDQUFDO1FBQ2RhLEdBQUcsRUFBRSxDQUFlO1FBQ3BCRyxHQUFHLEVBQUUsQ0FBQztZQUNKQyxPQUFPLEVBQUVELEdBQUcsQ0FBQ0MsT0FBTztZQUNwQkMsS0FBSyxFQUFFRixHQUFHLENBQUNFLEtBQUs7UUFDbEIsQ0FBQztJQUNILENBQUM7SUFDRCxFQUEyQyxBQUEzQyx5Q0FBMkM7SUFDM0NsQixPQUFPLENBQUNJLElBQUksQ0FBQyxDQUFDO0FBQ2hCLENBQUMifQ==